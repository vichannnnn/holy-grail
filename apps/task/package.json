{
  "name": "task",
  "private": true,
  "scripts": {
    "setup": "cp -n .env.example .env 2>/dev/null || true && uv sync",
    "dev": "npm run dev:api & npm run dev:worker",
    "dev:api": "uv run uvicorn api:app --host 0.0.0.0 --port 8001 --reload",
    "dev:worker": "OBJC_DISABLE_INITIALIZE_FORK_SAFETY=YES uv run celery -A worker worker --loglevel=info --max-tasks-per-child=1000",
    "dev:beat": "OBJC_DISABLE_INITIALIZE_FORK_SAFETY=YES uv run celery -A worker beat --loglevel=info",
    "worker": "uv run celery -A worker worker -B --loglevel=info",
    "api": "uv run uvicorn api:app --host 0.0.0.0 --port 8001 --reload",
    "format": "uv run ruff format .",
    "lint": "uv run ruff check .",
    "lint:fix": "uv run ruff check . --fix",
    "typecheck": "uv run mypy . --ignore-missing-imports",
    "test": "PYTHONPATH=. uv run pytest tests -x -vv",
    "test:cov": "PYTHONPATH=. uv run coverage run -m pytest tests && uv run coverage report",
    "check": "npm run lint && npm run typecheck && npm run test"
  }
}